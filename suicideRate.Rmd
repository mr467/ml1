---
title: "SuicideRate_MachineLearning1"
author: "Milica Pajkic, Nuria Piller und Marco Rieder"
date: "`r Sys.Date()`"
output:
  html_document:
    toc: true
    toc_depth: 3
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


# Introduction


```{r, include=FALSE}
library(lubridate)
library(dplyr)
library(readr)
library(data.table)
```


Suicide is a sensible topic and needs to be addressed in an empathical way. 
Behind each number and each case, is a story. 
This paper is analysing data from the statistical office of Finland. The final 
dataset is merged from various datasets covering economical, social and other factors. Most datasets have a montly resolution

```{r dataset suicides by monthly data betweend 1971 till 2021}
# data import
d.suicides_monthly <- read_csv("suicides_monthly.csv")
d.bankruptcy <- read_csv("bankruptcy.csv")
d.employment <- read_csv("employment.csv")
d.livingcosts <- read_csv("livingcosts.csv")
d.trips_abroad <- read_csv("trips_abroad.csv")
d.average_earnings <- read_csv("average_earnings.csv")
d.unemployment_duration <- read_csv("unemployment_duration.csv")

```
Merge data together for analyzing each parameter

```{r}
d.suicide_bankruptcy <- left_join(x=d.suicides_monthly, y= d.bankruptcy, by= "Month")

#remove rows without bankruptcy data (Before 1986)
d.suicide_bankruptcy <- na.omit(d.suicide_bankruptcy)

plot(d.suicide_bankruptcy$`Females Deaths`,d.suicide_bankruptcy$`Bankruptcies instigated, number of employees`)

plot(d.suicide_bankruptcy$`Males Deaths`,d.suicide_bankruptcy$`Bankruptcies instigated, number of employees`)

```

```{r}

d.suicide_livingcosts <- left_join(x=d.suicides_monthly, y= d.livingcosts by= "Month")

#remove rows without bankruptcy data (Before 1986)
d.suicide_livingcosts <- na.omit(d.suicide_livingcosts)

plot(x = d.suicide_livingcosts$`Females Deaths`, y = d.suicide_livingcosts$`Point figure`)
plot(d.suicide_livingcosts$`Males Deaths`,d.suicide_livingcosts$`Point figure`)

```

```{r}
#merge multiple datasets into one major (resolution monthly data)
#Merging by month for the bankruptcy, costofliving(indexed), duration of 
#unemployment and amount of TripsAbroad


d.suicide_merged  <-  left_join(d.suicides_monthly, d.bankruptcy, by='Month') %>%
                left_join(., d.suicide_livingcosts, by='Month') %>%
                            left_join(.,d.unemployment_duration, by='Month') %>%
                            left_join(.,d.trips_abroad, by= 'Month') 

#add total of suicides by adding male and female suicide

d.suicide_merged$Total_deaths <- d.suicide_merged$`Males Deaths`+d.suicide_merged$`Females Deaths`
```


# Methodes

## Model GLM Poisson

## Model Neural Networks 
